<ion-header>
  <div>
    <ion-navbar no-border-bottom color="primary">
      <button *ngIf="view=='post'" ion-button menuToggle>
        <ion-icon name="Back"></ion-icon>
      </button>
      <ion-title>
        <div class="item item-avatar">
          <h2>{{judul}}</h2>
        </div>
      </ion-title>
    </ion-navbar>
  </div>

  <div *ngIf="view=='comment'">
    <div text-center>
      <ion-card color="primary" (click)="toggleView()">
        <ion-card-content>
          <h2>Lihat Kasus</h2>
        </ion-card-content>
      </ion-card>
    </div>
    <ion-navbar>
      <ion-title>
        Pendamping
      </ion-title>
    </ion-navbar>
    <ion-item no-lines>
      <ion-avatar item-start *ngFor="let user of users">
        <img src="">
        <h3 align="center"></h3>
      </ion-avatar>
    </ion-item>
  </div>
</ion-header>

<ion-content>
  <div *ngIf="view=='post'">
    <ion-title>

      <ion-item>
        <h2>Nama pendamping</h2>
        <p>{{posted_by}}</p>
      </ion-item>

      <ion-item>
        <h2>Propinsi</h2>
        <p>{{propinsi}}</p>
      </ion-item>

      <!-- <ion-item>
          <ion-label stacked no-border-top>Daerah</ion-label>
          <ion-input [(ngModel)]="daerah" type="text"></ion-input>
        </ion-item> -->

      <div *ngIf="type==1">
        <ion-item>
          <h2>Penggugat</h2>
          <p>{{penggugat}}</p>
        </ion-item>

        <ion-item>
          <h2>Tergugat</h2>
          <p>{{tergugat}}</p>
        </ion-item>
      </div>

      <div *ngIf="type==2">
        <ion-item>
          <h2>Pelaksana</h2>
          <p>{{penggugat}}</p>
        </ion-item>

        <ion-item>
          <h2>Penanggungjawab</h2>
          <p>{{tergugat}}</p>
        </ion-item>
      </div>

    </ion-title>

    <div *ngIf="type==1">
      <ion-navbar color="primary">
        <ion-title>
          Kronologi
        </ion-title>
      </ion-navbar>
      <ion-item text-wrap>
        <h2 class="bigbox">{{kronologi}}</h2>
      </ion-item>
    </div>

    <div *ngIf="type==2">
      <ion-navbar color="primary">
        <ion-title>
          Deskripsi Kegiatan
        </ion-title>
      </ion-navbar>
      <ion-item text-wrap>
        <h2 class="bigbox">{{kronologi}}</h2>
      </ion-item>
    </div>

    <div *ngIf="images.length>0">
      <ion-navbar color="primary">
        <ion-title>
          Dokumen Pendukung
        </ion-title>
      </ion-navbar>

      <ion-slides>
        <ion-slide>
          <div class="item item-avatar">
            <img src="//tutorialsplane.com/runtest/ionic/img/profile.jpg">
          </div>
        </ion-slide>
        <ion-slide>
          <div class="item item-image">
            <img src="//tutorialsplane.com/runtest/ionic/img/cover.jpg">
          </div>
        </ion-slide>
        <ion-slide>
          <div class="item item-image">
            <img src="//media.istockphoto.com/photos/thirsty-african-american-athlete-drinking-water-in-a-gym-picture-id668203864?k=6&m=668203864&s=612x612&w=0&h=qOKWHN87CQsaGZwF3RCQ4tod58YcStbdozm2xiv6XfM=">
          </div>
        </ion-slide>
      </ion-slides>
    </div>

    <!-- the comment section -->
    <!-- <div>
      <ion-refresher (ionRefresh)="purgeList($event)">
        <ion-refresher-content>

        </ion-refresher-content>
      </ion-refresher>

      <ion-list>
        <button ion-item *ngFor="let item of items1" (click)="viewComment(item.no_post)">
          <ion-card-header>
            <h3>{{item.nama_korban}}</h3>
          </ion-card-header>

          <ion-card-content>
            {{item.no_post}}
          </ion-card-content>
        </button>
      </ion-list>

      <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </div> -->
  </div>

  <div *ngIf="view=='comment'">

    <ion-infinite-scroll (ionInfinite)="doInfinite($event)" position="top">
      <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>

    <ion-list text-wrap *ngFor="let msg of items1">
      <ion-item *ngIf="msg.posted_name!=null">

        <!-- my messages -->
        <ion-grid *ngIf="msg.posted_by==creds.data.email">
          <ion-row>
            <ion-col>
              <div style="float:right; text-align: right" color="primary">
                <h3>{{msg.posted_name}}</h3>
                <h2>{{msg.message}} </h2>
                <h2> <span class="time-display">{{dateToTime(msg.date_created)}} </span></h2>
              </div>
            </ion-col>
            <ion-col col-auto>
              <ion-avatar style="float:right;" color="primary">
                <img src='' color="blue">
                <b>{{msg.posted_by[0]}}</b>
              </ion-avatar>
            </ion-col>
          </ion-row>
        </ion-grid>

        <!-- other's messages -->
        <ion-grid *ngIf="msg.posted_by!=creds.data.email">
          <ion-row>
            <ion-col col-auto>
              <ion-avatar color="secondary">
                <img src=''>
                <b>{{msg.posted_name[0]}}</b>
              </ion-avatar>
            </ion-col>
            <ion-col>
              <div color="secondary">
                <h3>{{msg.posted_name}}</h3>
                <h2> {{msg.message}} </h2>
                <h2> <span class="time-display">{{dateToTime(msg.date_created)}} </span></h2>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>

        <!-- test -->
        <!-- <ion-grid>
          <ion-row>
            <ion-col>
              <div style="float:right; text-align: center" color="primary">
                <h1>{{msg.message}}</h1>
                <h2> <span class="time-display"></span></h2>
                <p> </p>
              </div>
            </ion-col>
            <ion-col col-auto>
              <ion-avatar style="float:right;">
                <img src=''>
              </ion-avatar>
            </ion-col>
          </ion-row>
        </ion-grid> -->

      </ion-item>
    </ion-list>

  </div>
</ion-content>

<ion-footer>
  <div text-center *ngIf="view=='post'">
    <ion-card color="primary" (click)="toggleView()">
      <ion-card-content>
        <h2>Komentar</h2>
      </ion-card-content>
    </ion-card>
  </div>
  <div *ngIf="view=='comment'">
    <ion-toolbar>
      <input type="text" class="form-control" placeholder="Tulis Komentar..." [(ngModel)]="message" (keyup.enter)="send()">
      <ion-buttons right>
        <button (click)="send()" ion-button icon-only item-right class="send-chat-button">
          <ion-icon name="send"></ion-icon>
        </button>
      </ion-buttons>
    </ion-toolbar>
  </div>
</ion-footer>
